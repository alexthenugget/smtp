# üìß SMTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ (Yandex)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π SMTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –ø–∏—Å–µ–º —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä Yandex —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–ª–æ–∂–µ–Ω–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                                 |
|------------------|---------------------------------------------------------------------------|
| `send_recv`      | –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç SMTP-—Å–µ—Ä–≤–µ—Ä–∞                      |
| `create_msg`     | –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ MIME-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–ª–æ–∂–µ–Ω–∏–π                       |
| `send_msg`       | –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞        |

### 2. –ü–æ–¥—Å–∏—Å—Ç–µ–º—ã

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞ `AUTH LOGIN`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞

**–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏—Å–µ–º:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MIME-—Ç–∏–ø–æ–≤ –≤–ª–æ–∂–µ–Ω–∏–π
- Base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü MIME-—Å–µ–∫—Ü–∏–π

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞:**
- –ß—Ç–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ –∫–æ–Ω—Å–æ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å —Ç–æ—á–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8

### 3. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                                 |
|------------------|---------------------------------------------------------------------------|
| `exts`          | –°–ª–æ–≤–∞—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤ –∏ MIME-—Ç–∏–ø–æ–≤                     |
| `dotsRe`        | –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ       |

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Python 3.6+
- –ê–∫–∫–∞—É–Ω—Ç Yandex —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

python
host = ('smtp.yandex.ru', 465)  # SMTP-—Å–µ—Ä–≤–µ—Ä –∏ –ø–æ—Ä—Ç
UPSTREAM_DNS = ('212.193.163.7', 53)  # –†–µ–∑–µ—Ä–≤–Ω—ã–π DNS (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏)
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–ª–æ–∂–µ–Ω–∏–π
–¢–∏–ø —Ñ–∞–π–ª–∞	–†–∞—Å—à–∏—Ä–µ–Ω–∏—è	MIME-—Ç–∏–ø
–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è	.png, .jpg, .gif	image/[—Ç–∏–ø]
–í–∏–¥–µ–æ	.mp4	video/mp4
–ê—É–¥–∏–æ	.mp3	audio/mpeg

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

## –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å—Ç–æ–µ –ø–∏—Å—å–º–æ

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è/–ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–º—É –∏ —Ç–µ–∫—Å—Ç
- –ö–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç SSL-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ü—Ä–æ—Ö–æ–¥–∏—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–æ

## –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–∏—Å—å–º–æ —Å –≤–ª–æ–∂–µ–Ω–∏–µ–º

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
- –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç MIME-—Ç–∏–ø
- –ö–æ–¥–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ base64
- –§–æ—Ä–º–∏—Ä—É–µ—Ç MIME-—Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–∞–≤–Ω–æ–µ –ø–∏—Å—å–º–æ
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
–ò–∑–±–µ–≥–∞–Ω–∏–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ MIME 1.0
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º SMTP

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π
–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
host = ('smtp.yandex.ru', 465)  # SMTP-—Å–µ—Ä–≤–µ—Ä Yandex

# –¢–∞–π–º–∞—É—Ç—ã (–Ω–µ—è–≤–Ω—ã–µ)
socket_timeout = 30  # —Å–µ–∫—É–Ω–¥
–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

- –ó–∞–º–µ–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ
- –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Yandex
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
